# 算法题目分区集锦

说明：题目类型为2级标题，题目为5级标题。

## 1.前缀和

##### 数组段数

来源：[数组段数_牛客小白月赛86 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/73450/C)

题目详情：

**题目描述**

小蓝获得了一个长度为n的数组：A1, A2, ..., An。

小红对小灰灰提出了m个询问，第i个询问给出两个参数li, ri代表小红截取了原数组的Ai, Ai+1, ..., Ar部分。

对于每个询问，小灰灰想知道小红截取出的数组有多少段。

一个长度为s的数组B1, B2, ..., Bs，其段数被定义为最小的k使得将数组划分成连续的k段后，每个元素都属于某一段，且每段数组中的元素种类应该全部相同。

**输入描述**

输入第一行包含两个空格分隔的整数 n，m 分别代表数组长度和询问个数。

接下来一行输入 n 个空格分隔的整数分别代表：A1, A2, ..., An。

接下来 m 行，每行包含两个空格分隔的整数 li, ri 代表第 i 个询问给出的两个参数。

保证：

- 1 ≤ n, m ≤ 2 × 10^5
- 1 ≤ Ai ≤ 10^6
- 1 ≤ li ≤ ri ≤ n

**输出描述**

输出共 m 行，第 i 行代表第 i 个询问的答案。



**示例输入**

```PHP
6 4
2 2 3 1 3 3
1 3
2 5
2 2　
4 6
```

**示例输出**

```PHP
2
4
1
2
```

**解释**

```php
对于询问区间 [1, 3] 所在的子数组 {2, 2, 3} 其最少可以被划分为 2 段：{2, 2} 和 {3}。

对于询问区间 [2, 5] 所在的子数组 {2, 3, 1, 3} 其最少可以被划分为 4 段：{2}，{3}，{1}，和 {3}。

对于询问区间 [2, 2] 所在的子数组 {2} 其最少可以被划分为 1 段：{2}。

对于询问区间 [4, 6] 所在的子数组 {1, 3, 3} 其最少可以被划分为 2 段：{1} 和 {3, 3}。
```

**AC代码**

```c++
#include <bits/stdc++.h>
using namespace std;
#define int long long

const int N = 1e6+100;
const int mod = 1e9+7;
const int INF = 0x3f3f3f3f;

int a[N],b[N];
int n,m;

void solve(){
	int temp = -1,ans = 0;
	cin >> n >> m;
	for(int i = 1; i<= n; i++){
		cin >> a[i];
		if(temp == a[i]){
			b[i] = ans;
			continue;
		}
		else{
			ans++;
			b[i] = ans;
		}
		temp = a[i];
	}
	int a1,b1;
	for(int i = 0; i < m; i++){
		cin >> a1 >> b1;
		cout << b[b1]-b[a1]+1 << endl;
	}
	return ;
}

signed main(void){
	ios::sync_with_stdio(false);
	cin.tie(nullptr);

	int t = 1;
	//cin >> t;
	while(t--){
		solve();
	}

	return 0;
}

```



## 2.DFS

##### 剪纸游戏

来源：[剪纸游戏_牛客小白月赛86 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/73450/D)

题目详情：

**题目描述**
小蓝有一张 `n` 行 `m` 列的方格纸，她从这张纸上剪下了一些图案。

小灰灰拿到了小蓝剪下图案之后的残缺纸张，他知道小蓝有强迫症，不会使得两个剪下的图案相连通，而且剪纸时不会剪破任何一个完整的小方格，所以可以通过残缺纸张复原出小蓝剪下的图案。

现在小灰灰想知道，在小蓝剪下的图案中有多少个长方形（正方形可以看作是特殊的长方形）。

**输入描述:**
输入第一行包含两个空格分隔的整数分别代表 `n` 和 `m`。

接下来输入 `n` 行，每行包含 `m` 个字符，代表残缺纸张。

保证：
1 ≤ n, m ≤ 1000

字符仅有 '.' 和 '*' 两种字符，其中 '.' 代表被剪去的部分，'*' 代表未被剪去的部分。

**输出描述:**
输出一行一个整数，代表答案。



**示例1**
**输入**

```php
4 10
*.*.*...**
...***.*..
.**..*.*..
*..*****..
```

**输出**

```php
4
```

**说明**

![A](https://cdn.jsdelivr.net/gh/Zeratuli/Image@main/img/202401192315312.png)

可以看出，图中恰有一个正方形，三个长方形，共计四个长方形。

AC代码：

```c++
#include <bits/stdc++.h>
using namespace std;
#define int long long

const int N = 1e3+100;
const int mod = 1e9+7;
const int INF = 0x3f3f3f3f;

char a[N][N];
int dir[4][2] = {{0,1},{1,0},{0,-1},{-1,0}};
int jud,xmax,ymax,xmin,ymin,ans = 0;
int vis[N][N];
int n,m;
int cnt = 0;

void dfs(int x, int y){
	cnt++;
	vis[x][y] = 1;
	xmax = max(xmax,x);
	xmin = min(xmin,x);
	ymax = max(ymax,y);
	ymin = min(ymin,y);
	for(int k = 0; k < 4; k++){
		int dx = x + dir[k][0];
		int dy = y + dir[k][1];
		if((dx < 1) || (dx > n) || (dy < 1) || (dy > m) || (a[dx][dy] == '*') || (vis[dx][dy] == 1)) continue;
		dfs(dx,dy);
	}
	return ;
}

void solve(){
	cin >> n >> m;
	for(int i = 1; i <= n; i++){
		for(int j = 1; j <= m; j++){
			cin >> a[i][j];
			vis[i][j] = 0;
		}
	}
	for(int i = 1; i <= n; i++){
		for(int j = 1; j <= m; j++){
			if((a[i][j] != '*') && (vis[i][j] == 0)){
				a[i][j] = '0';
				xmax = -1,ymax = -1,xmin = N,ymin = N;
				dfs(i,j);
				int jud = (xmax-xmin+1)*(ymax-ymin+1);
				if(jud == cnt) ans++;
				cnt = 0;
			}
		}
	}
	cout << ans << endl;

	return ;
}

signed main(void){
	ios::sync_with_stdio(false);
	cin.tie(nullptr);

	int t = 1;
	//cin >> t;
	while(t--){
		solve();
	}

	return 0;
}

```

更新ing